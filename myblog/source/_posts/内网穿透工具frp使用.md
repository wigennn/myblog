---
title: 内网穿透工具frp使用
date: 2021-03-11 10:53:04
tags: 内网穿透
---

## 背景
自己搞了台树莓派，苦于只能局域网访问，我想在公司也能连树莓派，搜集了几种方法
- 花生壳
- frp

花生壳挺麻烦的，frp挺简单的
<!--more-->

## frp使用
看系统版本下载frp，下载地址:
    
    https://github.com/fatedier/frp/releases
    
## frp简单介绍
frp主要分为两部分，一个是frps服务端，一个是frpc客户端.

服务端需要部署在有公网的服务器上，配置文件是frps.ini，

服务器防火墙需要打开两个对外端口 7000和6000

命令启动

    nohup ./frps -c frps.ini &
    
客户端需要部署在树莓派上，修改配置文件，主要修改两个参数
```
    server_addr=x.x.x.x
    local_ip=0.0.0.0
```
x.x.x.x就是公网服务器的公网ip

## 连接测试
### 公网服务器连接测试
```
在树莓派上用telnet x.x.x.x 7000, 测试公网服务器7000端口是否能连通
在树莓派上用telnet x.x.x.x 6000, 测试公网服务器6000端口是否能连通
```
### frp连接测试
打开xshell，地址是公网ip，port是remote_ip=6000, 就可以连接树莓派了

### 踩坑
- 1.客户端启动的时候一直报dial tcp xxxx no route or host，原因是阿里云服务器,防火墙没关，端口未开
- 2.frp启动不了，报不能执行二进制文件，原因是frp版本问题，选择适合自己系统的frp版本
- 3.客户端启动的时候报连接不了，原因是公网服务器6000端口没开，对应客户端配置文件的remote_port